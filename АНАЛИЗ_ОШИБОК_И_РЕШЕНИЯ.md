# –ê–Ω–∞–ª–∏–∑ –ö–æ–¥–∞: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –û—à–∏–±–∫–∏ –∏ –†–µ—à–µ–Ω–∏—è

## –û–±–∑–æ—Ä

–ü—Ä–æ–≤–µ–¥–µ–Ω –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ ML Manipulation Bybit —Å–∏—Å—Ç–µ–º—ã. –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤—É—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç–µ —Å–∏—Å—Ç–µ–º—ã.

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ü—Ä–æ–±–ª–µ–º—ã

### 1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ì–ª–∞–≤–Ω–æ–≥–æ –§–∞–π–ª–∞ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞**: –§–∞–π–ª `backend/app.py` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø—Ä–æ–µ–∫—Ç–µ. –≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –±–µ–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –º–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è.

**–í–ª–∏—è–Ω–∏–µ**: 
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞ –±—ç–∫–µ–Ω–¥–∞
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –ù–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–†–µ—à–µ–Ω–∏–µ**: –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π `app.py` —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

### 2. –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –ò–º–ø–æ—Ä—Ç—ã –∏ –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**–ü—Ä–æ–±–ª–µ–º–∞**: –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏:
- `apiClient` –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `configService`
- `configService` –ø—ã—Ç–∞–µ—Ç—Å—è –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `apiService`
- ML –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–º–µ—é—Ç –≤–∑–∞–∏–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–í–ª–∏—è–Ω–∏–µ**: 
- –û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–∏—Å—Ç–µ–º—ã

### 3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è WebSocket

**–ü—Ä–æ–±–ª–µ–º–∞**: 
- –í `useWebSocket.ts` –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è URL
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

**–í–ª–∏—è–Ω–∏–µ**: 
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ WebSocket
- –ù–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ ML –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞**: 
- ML –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –º–µ–∂–¥—É –∫–ª–∞—Å—Å–∞–º–∏

**–í–ª–∏—è–Ω–∏–µ**: 
- ML —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ù–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –∏ –æ–±—É—á–µ–Ω–∏—è
- API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ—à–∏–±–∫–∏

### 5. –ü—Ä–æ–±–ª–µ–º—ã —Å –ë–∞–∑–æ–π –î–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ–±–ª–µ–º–∞**: 
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –≤ `db_manager.py`
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ TimescaleDB
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

**–í–ª–∏—è–Ω–∏–µ**: 
- –û—à–∏–±–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü
- –ü—Ä–æ–±–ª–µ–º—ã —Å –≥–∏–ø–µ—Ä—Ç–∞–±–ª–∏—Ü–∞–º–∏
- –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö

## üîß –î–µ—Ç–∞–ª—å–Ω—ã–µ –†–µ—à–µ–Ω–∏—è

### –†–µ—à–µ–Ω–∏–µ 1: –°–æ–∑–¥–∞–Ω–∏–µ –û—Å–Ω–æ–≤–Ω–æ–≥–æ –§–∞–π–ª–∞ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```python
# backend/app.py
import asyncio
import logging
import os
from contextlib import asynccontextmanager
from fastapi import FastAPI, WebSocket, WebSocketDisconnect
from fastapi.middleware.cors import CORSMiddleware
from fastapi.responses import JSONResponse
import uvicorn

# –ò–º–ø–æ—Ä—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
from db_manager import DBManager
from message_broker import MessageBroker
from bybit_websocket_client import BybitWebSocketClient
from manipulation.trade_processor import TradeProcessor
from manipulation.orderbook_analyzer import OrderBookAnalyzer
from manipulation.alert_manager import AlertManager
from manipulation.ml.ml_manager import MLManager
from manipulation.anomaly_detector import AnomalyDetector
from feature_engineering import FeatureEngineer
from manipulation.ml.data_collector import MLDataCollector
from config_manager import config_manager

# API —Ä–æ—É—Ç–µ—Ä—ã
from api.config_api import router as config_router
from manipulation.ml.ml_api import router as ml_router

# –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
db_manager = None
message_broker = None
ws_client = None
trade_processor = None
orderbook_analyzer = None
alert_manager = None
ml_manager = None
anomaly_detector = None

@asynccontextmanager
async def lifespan(app: FastAPI):
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
    await initialize_components()
    yield
    # –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
    await cleanup_components()

app = FastAPI(
    title="ML Manipulation Bybit API",
    description="API –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π –Ω–∞ Bybit",
    version="1.0.0",
    lifespan=lifespan
)

# CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–æ–≤
app.include_router(config_router)
app.include_router(ml_router)

async def initialize_components():
    """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã."""
    global db_manager, message_broker, ws_client, trade_processor
    global orderbook_analyzer, alert_manager, ml_manager, anomaly_detector
    
    try:
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        db_url = config_manager.get_database_url()
        db_manager = DBManager(db_url)
        await db_manager.connect()
        
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±—Ä–æ–∫–µ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
        rabbitmq_url = config_manager.get_rabbitmq_url()
        message_broker = MessageBroker(rabbitmq_url)
        await message_broker.connect()
        
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏
        alert_manager = AlertManager(db_manager, message_broker)
        trade_processor = TradeProcessor(alert_manager, message_broker)
        orderbook_analyzer = OrderBookAnalyzer(alert_manager, message_broker, trade_processor)
        
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ML –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
        feature_engineer = FeatureEngineer(db_manager, trade_processor, orderbook_analyzer)
        anomaly_detector = AnomalyDetector(alert_manager, feature_engineer, message_broker)
        ml_manager = MLManager(db_manager, trade_processor, orderbook_analyzer, anomaly_detector)
        
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä—â–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è ML
        data_collector = MLDataCollector(
            db_manager, ml_manager.ml_model, feature_engineer, message_broker,
            trade_processor, orderbook_analyzer
        )
        ml_manager.set_data_collector(data_collector)
        
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è WebSocket –∫–ª–∏–µ–Ω—Ç–∞
        ws_uri = config_manager.get('BYBIT_WS_URI', 'wss://stream.bybit.com/v5/public/linear')
        
        async def ws_message_handler(data):
            """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π WebSocket."""
            try:
                if 'topic' in data:
                    topic = data['topic']
                    if 'publicTrade' in topic:
                        if 'data' in data and data['data']:
                            for trade in data['data']:
                                await trade_processor.process_trade(trade)
                    elif 'orderbook' in topic:
                        if 'data' in data:
                            await orderbook_analyzer.process_orderbook_update(data['data'])
            except Exception as e:
                logging.error(f"–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ WebSocket —Å–æ–æ–±—â–µ–Ω–∏—è: {e}")
        
        ws_client = BybitWebSocketClient(ws_uri, ws_message_handler)
        await ws_client.connect()
        
        # –ó–∞–ø—É—Å–∫ ML —Å–∏—Å—Ç–µ–º—ã
        await ml_manager.start()
        await anomaly_detector.start()
        
        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        app.state.db_manager = db_manager
        app.state.message_broker = message_broker
        app.state.ws_client = ws_client
        app.state.trade_processor = trade_processor
        app.state.orderbook_analyzer = orderbook_analyzer
        app.state.alert_manager = alert_manager
        app.state.ml_manager = ml_manager
        app.state.anomaly_detector = anomaly_detector
        
        logging.info("–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã")
        
    except Exception as e:
        logging.error(f"–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤: {e}")
        raise

async def cleanup_components():
    """–û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏."""
    try:
        if ml_manager:
            await ml_manager.stop()
        if anomaly_detector:
            await anomaly_detector.stop()
        if ws_client:
            await ws_client.disconnect()
        if message_broker:
            await message_broker.disconnect()
        if db_manager:
            await db_manager.disconnect()
        logging.info("–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —É—Å–ø–µ—à–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã")
    except Exception as e:
        logging.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤: {e}")

@app.get("/")
async def root():
    return {"message": "ML Manipulation Bybit API"}

@app.get("/health")
async def health_check():
    return {
        "status": "healthy",
        "components": {
            "database": db_manager is not None,
            "websocket": ws_client is not None and ws_client.is_connected,
            "message_broker": message_broker is not None,
            "ml_manager": ml_manager is not None
        }
    }

if __name__ == "__main__":
    uvicorn.run(
        "app:app",
        host="0.0.0.0",
        port=5000,
        reload=True,
        log_level="info"
    )
```

### –†–µ—à–µ–Ω–∏–µ 2: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ WebSocket –•—É–∫–∞

```typescript
// frontend/src/hooks/useWebSocket.ts (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
import { useEffect, useRef, useState, useCallback } from 'react';
import { CONFIG } from '@/constants/config';

interface UseWebSocketOptions {
  onMessage?: (data: any) => void;
  onError?: (error: Event) => void;
  onOpen?: () => void;
  onClose?: () => void;
  reconnectInterval?: number;
  maxReconnectAttempts?: number;
}

export const useWebSocket = (endpoint: string, options: UseWebSocketOptions = {}) => {
  const {
    onMessage,
    onError,
    onOpen,
    onClose,
    reconnectInterval = 5000,
    maxReconnectAttempts = 10
  } = options;
  
  const [isConnected, setIsConnected] = useState(false);
  const [error, setError] = useState<string | null>(null);
  const [reconnectAttempts, setReconnectAttempts] = useState(0);
  const [data, setData] = useState<any>(null);
  
  const wsRef = useRef<WebSocket | null>(null);
  const reconnectTimeoutRef = useRef<number | null>(null);
  const shouldReconnectRef = useRef(true);

  const getWebSocketUrl = useCallback(() => {
    // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è WebSocket URL
    const baseUrl = CONFIG.WEBSOCKET_BASE_URL;
    const cleanEndpoint = endpoint.startsWith('/') ? endpoint : `/${endpoint}`;
    return `${baseUrl}${cleanEndpoint}`;
  }, [endpoint]);

  const connect = useCallback(() => {
    try {
      const url = getWebSocketUrl();
      console.log('Connecting to WebSocket:', url);
      
      if (wsRef.current?.readyState === WebSocket.OPEN) {
        return;
      }

      const ws = new WebSocket(url);
      wsRef.current = ws;

      ws.onopen = () => {
        console.log('WebSocket connected');
        setIsConnected(true);
        setError(null);
        setReconnectAttempts(0);
        onOpen?.();
      };

      ws.onmessage = (event) => {
        try {
          const parsedData = JSON.parse(event.data);
          setData(parsedData);
          onMessage?.(parsedData);
        } catch (err) {
          console.error('Failed to parse WebSocket message:', err);
        }
      };

      ws.onerror = (event) => {
        console.error('WebSocket error:', event);
        setError('WebSocket connection error');
        onError?.(event);
      };

      ws.onclose = () => {
        console.log('WebSocket disconnected');
        setIsConnected(false);
        onClose?.();
        
        if (shouldReconnectRef.current && reconnectAttempts < maxReconnectAttempts) {
          reconnectTimeoutRef.current = window.setTimeout(() => {
            setReconnectAttempts(prev => prev + 1);
            connect();
          }, reconnectInterval);
        }
      };
    } catch (err) {
      console.error('Failed to create WebSocket connection:', err);
      setError('Failed to create WebSocket connection');
    }
  }, [getWebSocketUrl, reconnectInterval, maxReconnectAttempts, reconnectAttempts, onMessage, onError, onOpen, onClose]);

  const disconnect = useCallback(() => {
    shouldReconnectRef.current = false;
    
    if (reconnectTimeoutRef.current) {
      clearTimeout(reconnectTimeoutRef.current);
      reconnectTimeoutRef.current = null;
    }
    
    if (wsRef.current) {
      wsRef.current.close();
      wsRef.current = null;
    }
    
    setIsConnected(false);
  }, []);

  const sendMessage = useCallback((message: any) => {
    if (wsRef.current?.readyState === WebSocket.OPEN) {
      wsRef.current.send(JSON.stringify(message));
      return true;
    }
    return false;
  }, []);

  useEffect(() => {
    shouldReconnectRef.current = true;
    connect();

    return () => {
      disconnect();
    };
  }, [connect, disconnect]);

  return {
    isConnected,
    error,
    reconnectAttempts,
    data,
    sendMessage,
    disconnect,
    reconnect: connect
  };
};
```

### –†–µ—à–µ–Ω–∏–µ 3: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API –ö–ª–∏–µ–Ω—Ç–∞

```typescript
// frontend/src/api/client.ts (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
import { MLStatus, TrainingMetrics, Prediction, PredictionHistory, Alert, SystemStatus, StreamingData, DatabaseStats, MetricsData } from '@/types/ml';
import { CONFIG } from '@/constants/config';

class ApiClient {
  private apiBaseUrl: string = CONFIG.API_BASE_URL;

  constructor() {
    // –£–±–∏—Ä–∞–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∏–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞
  }

  private async request<T>(endpoint: string, options?: RequestInit): Promise<T> {
    const url = `${this.apiBaseUrl}${endpoint}`;
    
    console.log(`Making API request to: ${url}`);
    
    try {
      const response = await fetch(url, {
        headers: {
          'Content-Type': 'application/json',
          ...options?.headers,
        },
        ...options,
      });

      console.log(`API response status: ${response.status}`);

      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }

      const data = await response.json();
      console.log(`API response data:`, data);
      return data;
    } catch (error) {
      console.error(`API request failed for ${endpoint}:`, error);
      throw error;
    }
  }

  // ML Status
  async getMLStatus(): Promise<MLStatus> {
    return this.request<MLStatus>('/ml/status');
  }

  async startTraining(symbol?: string, timeframe?: string): Promise<{ message: string }> {
    return this.request<{ message: string }>('/ml/training/force', {
      method: 'POST',
      body: JSON.stringify({ symbol, timeframe }),
    });
  }

  async stopTraining(): Promise<{ message: string }> {
    return this.request<{ message: string }>('/ml/mode/switch', {
      method: 'POST',
      body: JSON.stringify({ mode: 'prediction' }),
    });
  }

  async startPrediction(symbol?: string): Promise<{ message: string }> {
    return this.request<{ message: string }>('/ml/mode/switch', {
      method: 'POST',
      body: JSON.stringify({ mode: 'prediction' }),
    });
  }

  async stopPrediction(): Promise<{ message: string }> {
    return this.request<{ message: string }>('/ml/mode/switch', {
      method: 'POST',
      body: JSON.stringify({ mode: 'training' }),
    });
  }

  // Training Metrics
  async getTrainingMetrics(): Promise<TrainingMetrics> {
    return this.request<TrainingMetrics>('/ml/training/metrics');
  }

  // Predictions
  async getCurrentPredictions(): Promise<Prediction[]> {
    return this.request<Prediction[]>('/ml/predictions/active');
  }

  async getPredictionHistory(limit?: number): Promise<PredictionHistory[]> {
    const params = limit ? `?limit=${limit}` : '';
    return this.request<PredictionHistory[]>(`/ml/predictions/history${params}`);
  }

  // Alerts
  async getAlerts(limit?: number): Promise<Alert[]> {
    const params = limit ? `?limit=${limit}` : '';
    return this.request<Alert[]>(`/alerts${params}`);
  }

  async markAlertAsRead(alertId: number): Promise<{ message: string }> {
    return this.request<{ message: string }>(`/alerts/${alertId}/read`, {
      method: 'POST',
    });
  }

  // System Status
  async getSystemStatus(): Promise<SystemStatus> {
    return this.request<SystemStatus>('/status');
  }

  // Streaming Data
  async getStreamingData(): Promise<StreamingData[]> {
    return this.request<StreamingData[]>('/futures-symbols/market-data');
  }

  // Database
  async getDatabaseStats(): Promise<DatabaseStats> {
    return this.request<DatabaseStats>('/database/stats');
  }

  // Metrics
  async getMetrics(): Promise<MetricsData> {
    return this.request<MetricsData>('/metrics');
  }
}

export const apiClient = new ApiClient();
export default apiClient;
```

### –†–µ—à–µ–Ω–∏–µ 4: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –°–µ—Ä–≤–∏—Å–∞

```typescript
// frontend/src/services/configService.ts (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
import { CONFIG } from '../constants/config';

export interface ServiceConfig {
  host: string;
  port: number;
  protocol: string;
  url: string;
}

export interface WebSocketConfig extends ServiceConfig {
  secure_protocol: string;
  reconnect_interval: number;
  max_reconnect_attempts: number;
}

export interface AppConfig {
  api: ServiceConfig;
  websocket: WebSocketConfig;
  frontend: ServiceConfig;
  environment: string;
  last_updated: string;
}

class ConfigService {
  private static instance: ConfigService;
  private config: AppConfig | null = null;
  private lastFetch: number = 0;
  private readonly CACHE_DURATION = 30000; // 30 —Å–µ–∫—É–Ω–¥

  private constructor() {}

  public static getInstance(): ConfigService {
    if (!ConfigService.instance) {
      ConfigService.instance = new ConfigService();
    }
    return ConfigService.instance;
  }

  /**
   * –ü–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (—Å fallback –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   */
  public async getConfig(forceRefresh: boolean = false): Promise<AppConfig> {
    const now = Date.now();
    
    if (!forceRefresh && this.config && (now - this.lastFetch) < this.CACHE_DURATION) {
      return this.config;
    }

    try {
      console.log('Loading configuration from API...');
      const response = await fetch(`${CONFIG.API_BASE_URL}/config/frontend`, {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json',
        },
      });
      
      if (!response.ok) {
        throw new Error(`HTTP error! status: ${response.status}`);
      }
      
      const data = await response.json();
      this.config = data.config;
      this.lastFetch = now;
      
      console.log('Configuration loaded successfully:', this.config);
      return this.config;
    } catch (error) {
      console.error('Failed to load configuration, using defaults:', error);
      
      // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
      this.config = this.getDefaultConfig();
      return this.config;
    }
  }

  /**
   * –ü–æ–ª—É—á–∞–µ—Ç WebSocket URL
   */
  public async getWebSocketUrl(endpoint: string = ''): Promise<string> {
    try {
      const config = await this.getConfig();
      let url = config.websocket.url;
      
      // –ó–∞–º–µ–Ω—è–µ–º http –Ω–∞ ws, https –Ω–∞ wss
      if (url.startsWith('http://')) {
        url = url.replace('http://', 'ws://');
      } else if (url.startsWith('https://')) {
        url = url.replace('https://', 'wss://');
      }
      
      if (endpoint) {
        if (!endpoint.startsWith('/')) {
          endpoint = '/' + endpoint;
        }
        url += endpoint;
      }
      
      return url;
    } catch (error) {
      console.error('Failed to get WebSocket URL, using default:', error);
      return `${CONFIG.WEBSOCKET_BASE_URL}${endpoint}`;
    }
  }

  /**
   * –ü–æ–ª—É—á–∞–µ—Ç API URL
   */
  public async getApiUrl(endpoint: string = ''): Promise<string> {
    try {
      const config = await this.getConfig();
      let url = config.api.url;
      
      if (endpoint) {
        if (!endpoint.startsWith('/')) {
          endpoint = '/' + endpoint;
        }
        url += endpoint;
      }
      
      return url;
    } catch (error) {
      console.error('Failed to get API URL, using default:', error);
      return `${CONFIG.API_BASE_URL}${endpoint}`;
    }
  }

  /**
   * –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
   */
  private getDefaultConfig(): AppConfig {
    return {
      api: {
        host: 'localhost',
        port: 5000,
        protocol: 'http',
        url: CONFIG.API_BASE_URL
      },
      websocket: {
        host: 'localhost',
        port: 5000,
        protocol: 'ws',
        secure_protocol: 'wss',
        url: CONFIG.WEBSOCKET_BASE_URL,
        reconnect_interval: 5,
        max_reconnect_attempts: 10
      },
      frontend: {
        host: 'localhost',
        port: 3001,
        protocol: 'http',
        url: `http://localhost:3001`
      },
      environment: 'development',
      last_updated: new Date().toISOString()
    };
  }
}

export const configService = ConfigService.getInstance();
export default configService;
```

### –†–µ—à–µ–Ω–∏–µ 5: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ù–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö API –≠–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

```python
# backend/api/main_api.py
from fastapi import APIRouter, HTTPException, Depends, Request
from typing import List, Dict, Any, Optional
import logging
from datetime import datetime

logger = logging.getLogger(__name__)

router = APIRouter(tags=["main"])

def get_db_manager(request: Request):
    return request.app.state.db_manager

def get_trade_processor(request: Request):
    return request.app.state.trade_processor

def get_orderbook_analyzer(request: Request):
    return request.app.state.orderbook_analyzer

@router.get("/status")
async def get_system_status(
    db_manager=Depends(get_db_manager),
    trade_processor=Depends(get_trade_processor),
    orderbook_analyzer=Depends(get_orderbook_analyzer)
):
    """–ü–æ–ª—É—á–∞–µ—Ç –æ–±—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã."""
    try:
        return {
            "status": "running",
            "uptime": 3600,  # –ó–∞–≥–ª—É—à–∫–∞
            "cpu_usage": 25.5,
            "memory_usage": 45.2,
            "active_connections": 1,
            "last_update": datetime.now().isoformat(),
            "components": {
                "database": db_manager is not None,
                "trade_processor": trade_processor is not None,
                "orderbook_analyzer": orderbook_analyzer is not None
            }
        }
    except Exception as e:
        logger.error(f"Error getting system status: {e}")
        raise HTTPException(status_code=500, detail=str(e))

@router.get("/futures-symbols/market-data")
async def get_market_data():
    """–ü–æ–ª—É—á–∞–µ—Ç —Ä—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ñ—å—é—á–µ—Ä—Å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤."""
    try:
        # –ó–∞–≥–ª—É—à–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
        return [
            {
                "symbol": "BTCUSDT",
                "price": 45000.50,
                "volume": 1250000,
                "change_24h": 2.5,
                "timestamp": datetime.now().isoformat()
            },
            {
                "symbol": "ETHUSDT", 
                "price": 3200.75,
                "volume": 850000,
                "change_24h": -1.2,
                "timestamp": datetime.now().isoformat()
            }
        ]
    except Exception as e:
        logger.error(f"Error getting market data: {e}")
        raise HTTPException(status_code=500, detail=str(e))

@router.get("/alerts")
async def get_alerts(
    limit: int = 100,
    db_manager=Depends(get_db_manager)
):
    """–ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞–ª–µ—Ä—Ç–æ–≤."""
    try:
        if db_manager:
            alerts = await db_manager.get_alerts(limit)
            return alerts
        return []
    except Exception as e:
        logger.error(f"Error getting alerts: {e}")
        raise HTTPException(status_code=500, detail=str(e))

@router.get("/database/stats")
async def get_database_stats(db_manager=Depends(get_db_manager)):
    """–ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö."""
    try:
        return {
            "total_records": 150000,
            "tables": [
                {"name": "raw_trades", "count": 100000, "size": "50MB"},
                {"name": "raw_orderbooks", "count": 30000, "size": "25MB"},
                {"name": "alerts", "count": 15000, "size": "10MB"},
                {"name": "ml_training_data", "count": 5000, "size": "5MB"}
            ],
            "last_update": datetime.now().isoformat()
        }
    except Exception as e:
        logger.error(f"Error getting database stats: {e}")
        raise HTTPException(status_code=500, detail=str(e))

@router.get("/metrics")
async def get_metrics():
    """–ü–æ–ª—É—á–∞–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏."""
    try:
        return {
            "cpu_usage": 25.5,
            "memory_usage": 45.2,
            "disk_usage": 60.1,
            "network_io": {
                "bytes_sent": 1024000,
                "bytes_recv": 2048000
            },
            "uptime": 3600,
            "active_connections": 5,
            "ml_processes": {
                "training": True,
                "prediction": True,
                "data_collection": True
            },
            "database": {
                "size": "100MB",
                "connections": 3,
                "queries_per_second": 50
            },
            "api": {
                "requests_per_minute": 120,
                "avg_response_time": 150,
                "error_rate": 0.02
            }
        }
    except Exception as e:
        logger.error(f"Error getting metrics: {e}")
        raise HTTPException(status_code=500, detail=str(e))
```

## üìã –ü–æ–ª–Ω—ã–π –°–ø–∏—Å–æ–∫ –ü—Ä–æ–±–ª–µ–º

### Backend –ü—Ä–æ–±–ª–µ–º—ã

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è
2. **–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã –≤ ML –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö** - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è
3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è WebSocket –∫–ª–∏–µ–Ω—Ç–∞** - –í—ã—Å–æ–∫–∞—è
4. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –≤ DBManager** - –°—Ä–µ–¥–Ω—è—è
5. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ async —Ñ—É–Ω–∫—Ü–∏—è—Ö** - –°—Ä–µ–¥–Ω—è—è
6. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å TimescaleDB** - –°—Ä–µ–¥–Ω—è—è
7. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ API** - –°—Ä–µ–¥–Ω—è—è
8. **–ü—Ä–æ–±–ª–µ–º—ã —Å monkey patching –≤ pybit_client** - –ù–∏–∑–∫–∞—è

### Frontend –ü—Ä–æ–±–ª–µ–º—ã

1. **–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö** - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è** - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö** - –í—ã—Å–æ–∫–∞—è
4. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ async/await –≤ —Ö—É–∫–∞—Ö** - –í—ã—Å–æ–∫–∞—è
5. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** - –°—Ä–µ–¥–Ω—è—è
6. **–ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ re-renders –≤ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö** - –°—Ä–µ–¥–Ω—è—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ü—Ä–æ–±–ª–µ–º—ã

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏** - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏** - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫** - –í—ã—Å–æ–∫–∞—è
4. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π** - –í—ã—Å–æ–∫–∞—è
5. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞** - –°—Ä–µ–¥–Ω—è—è

## üõ† –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –î–µ–π—Å—Ç–≤–∏—è

1. **–°–æ–∑–¥–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** (`backend/app.py`)
2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã** –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö
3. **–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å WebSocket –ª–æ–≥–∏–∫—É** –≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
4. **–î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**
5. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é ML –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –£–ª—É—á—à–µ–Ω–∏—è

1. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ comprehensive error handling**
3. **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è proper dependency injection**
4. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ unit –∏ integration —Ç–µ—Å—Ç–æ–≤**
5. **–£–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞**

### –ü–æ—Ä—è–¥–æ–∫ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. –°–æ–∑–¥–∞—Ç—å `backend/app.py` —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å `frontend/src/hooks/useWebSocket.ts`
3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å `frontend/src/api/client.ts`
4. –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
5. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
6. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ó–∞–º–µ—á–∞–Ω–∏—è

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å–ª–∏—à–∫–æ–º –ª–∏–±–µ—Ä–∞–ª—å–Ω–æ

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ API –æ—Ç–≤–µ—Ç–æ–≤
- –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö
- –ù–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ù–µ—Ç –∞–ª–µ—Ä—Ç–æ–≤ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Ç—Ä–∏–∫ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∏–º–µ–µ—Ç —Å–µ—Ä—å–µ–∑–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤—É—é—Ç –µ–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç–µ. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–≤—è–∑–∞–Ω—ã —Å:

1. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º –≥–ª–∞–≤–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π WebSocket
4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º proper error handling

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ç–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Å—Ç–∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.